
###################################################################3
def Defcat(out,outletid):
    otsheds = np.full((1,1),outletid)
    Shedid = np.full((10000000,1),-99999999999999999)
    psid = 0
    rout = copy.copy(out)
    while len(otsheds) > 0:
        noutshd = np.full((10000000,1),-999999999999999)
        poshdid = 0
        for i in range(0,len(otsheds)):
            Shedid[psid] = otsheds[i]
            psid = psid + 1
            irow = np.argwhere(rout[:,1]==otsheds[i]).astype(int)
            for j in range(0,len(irow)):
                noutshd[poshdid] = rout[irow[j],0]
                poshdid = poshdid + 1
        noutshd = np.unique(noutshd)
        otsheds = noutshd[noutshd>=0]
    Shedid = np.unique(Shedid)
    Shedid = Shedid[Shedid>=0]
    return Shedid

def writeraster(w_filname,nraster,dataset):
    orvh = open(w_filname,"w")
    ncols = arcpy.GetRasterProperties_management(dataset, "COLUMNCOUNT")
    nrows = arcpy.GetRasterProperties_management(dataset, "ROWCOUNT")
    xllcorner = arcpy.GetRasterProperties_management(dataset, "LEFT")
    yllcorner = arcpy.GetRasterProperties_management(dataset, "BOTTOM")
    orvh.write("ncols      "+str(ncols) + "\n")
    orvh.write("nrows      "+ str(nrows) + "\n")
    orvh.write("xllcorner    "+str(xllcorner) + "\n")
    orvh.write("yllcorner    "+str(yllcorner) + "\n")
    orvh.write("cellsize     "+str(cellSize) + "\n")
    orvh.write("NODATA_value  -9999" + "\n")
    orvh.close()
    f_handle = open(w_filname, 'a')
    np.savetxt(f_handle,nraster,fmt='%i')
    f_handle.close()


import numpy as np
from scipy.optimize import curve_fit
import copy
import sys
import shutil
import os
import csv
import pandas as pd
from shutil import copyfile
from simpledbf import Dbf5
from qgis.core import (
    QgsVectorLayer
)

##### Readed inputs
hyshddem = sys.argv[1]
hyshddir = sys.argv[2]
hyshdacc = sys.argv[3]
hyshdply = sys.argv[4]
WidDep = sys.argv[5]
Lakefile = sys.argv[6]
Landuse = sys.argv[7]
Landuseinfo = sys.argv[8]
obspoint = sys.argv[9]
OutHyID = int(sys.argv[10])
OutHyID2 = int(sys.argv[11])
OutputFolder = sys.argv[12] + "/"

hyinfocsv = hyshdply[:-3] + "dbf"
VolThreshold = 0

